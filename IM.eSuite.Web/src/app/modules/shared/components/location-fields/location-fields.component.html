<div [formGroup]="locationForm">
  <div class="form-group" [ngClass]="{'has-error': locationForm.controls.plantId.invalid && !locationForm.controls.plantId.pristine}">
    <label>{{"Organization.Levels.Plant" | translate}} <span class="text-danger">*</span> </label>
    <ngx-select allowClear="true" formControlName="plantId" [items]="plants" [placeholder]="'Organization.Levels.Plant' | translate" 
      (select)="onPlantSelected($event)" (remove)="onPlantRemoved()" (typed)="onPlantSearchChanged($event)" required></ngx-select>
    <div class="help-block" *ngIf="locationForm.controls.plantId.invalid && !locationForm.controls.plantId.pristine">
      {{"Common.Forms.RequiredField" | translate}}
    </div>
  </div>
  <div class="form-group" [ngClass]="{'has-error': locationForm.controls.departmentId.invalid && !locationForm.controls.departmentId.pristine}" >
    <label>{{"Organization.Levels.Department" | translate}} <span class="text-danger">*</span> </label>
    <ngx-select allowClear="true" formControlName="departmentId" [items]="departments" [placeholder]="'Organization.Levels.Department' | translate" 
      (select)="onDepartmentSelected($event)" (remove)="onDepartmentRemoved()" required></ngx-select>
    <div class="help-block" *ngIf="locationForm.controls.departmentId.invalid && !locationForm.controls.departmentId.pristine">
      {{"Common.Forms.RequiredField" | translate}}
    </div>
  </div>
  <div class="form-group" [ngClass]="{'has-error': locationForm.controls.workshopId.invalid && !locationForm.controls.workshopId.pristine}">
    <label>{{"Organization.Levels.Workshop" | translate}} <span class="text-danger">*</span> </label>
    <ngx-select allowClear="true" formControlName="workshopId" [items]="workshops" [placeholder]="'Organization.Levels.Workshop' | translate" 
      (select)="onWorkshopSelected($event)" (remove)="onWorkshopRemoved()" required></ngx-select>
    <div class="help-block" *ngIf="locationForm.controls.workshopId.invalid && !locationForm.controls.workshopId.pristine">
      {{"Common.Forms.RequiredField" | translate}}
    </div>
  </div> 
  <div class="form-group" [ngClass]="{'has-error': locationForm.controls.jobId.invalid && !locationForm.controls.jobId.pristine}">
    <label>{{"Organization.Levels.Job" | translate}} <span class="text-danger">*</span> </label>
    <ngx-select allowClear="true" formControlName="jobId" [items]="jobs" [placeholder]="'Organization.Levels.Job' | translate" 
      (select)="onJobSelected($event)" (remove)="onJobRemoved()" required></ngx-select>
    <div class="help-block" *ngIf="locationForm.controls.jobId.invalid && !locationForm.controls.jobId.pristine">
      {{"Common.Forms.RequiredField" | translate}}
    </div>
  </div>
  <div class="form-group" [ngClass]="{'has-error': locationForm.controls.workstationId.invalid && !locationForm.controls.workstationId.pristine}" >
    <label>{{"Organization.Levels.Workstation" | translate}} <span class="text-danger" *ngIf="requiresWorkStation">*</span> </label>
    <ngx-select allowClear="true" formControlName="workstationId" [items]="workstations" [placeholder]="'Organization.Levels.Workstation' | translate" 
      (select)="onWorkstationSelected($event)" (remove)="onWorkstationRemoved()"></ngx-select>
    <div class="help-block" *ngIf="locationForm.controls.workstationId.invalid && !locationForm.controls.workstationId.pristine">
      {{"Common.Forms.RequiredField" | translate}}
    </div>
  </div> 
  <div class="form-group">
    <label>{{"Organization.Levels.Task" | translate}}</label>
    <div class="row">
      <div class="col-xs-12 col-lg-9">
        <ngx-select allowClear="true" formControlName="taskId" [items]="tasks" [placeholder]="'Organization.Levels.Task' | translate"></ngx-select><br/>
      </div>  
      <div class="col-xs-12 col-lg-3">
        <button type="button" class="btn btn-primary pull-right" (click)="addTask(locationForm.controls.workstationId.value)"  [disabled]="locationForm.controls.workstationId.invalid">{{"Organization.AddButtons.Task" | translate }}</button>
      </div>
    </div>
  </div>
</div>
<div #addTaskModal="bs-modal" bsModal class="modal fade" (onHidden)="onAddTaskModalHidden()">
  <app-task-add [workstation]="selectedWorkstation" [modal]="addTaskModal" [(reset)]="resetAddTaskForm" (addedTaskRequest)="onTaskAdded($event)"></app-task-add>
</div>